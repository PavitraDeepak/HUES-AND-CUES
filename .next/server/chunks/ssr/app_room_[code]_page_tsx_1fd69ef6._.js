module.exports=[52562,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(17870);let f=({players:a,hostId:c,currentUserId:d,isGameActive:e=!1,clueGiverId:f})=>(0,b.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 shadow-lg",children:[(0,b.jsxs)("h3",{className:"text-lg font-bold text-white mb-3",children:["Players (",a.length,")"]}),(0,b.jsx)("div",{className:"space-y-2",children:a.map(a=>{let g=a.id===c,h=a.id===d,i=a.id===f;return(0,b.jsxs)("div",{className:`
                flex items-center justify-between p-3 rounded-lg
                ${h?"bg-blue-900 border-2 border-blue-500":"bg-gray-700"}
                ${i?"ring-2 ring-yellow-400":""}
              `,children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,b.jsx)("div",{className:`w-3 h-3 rounded-full ${a.ready?"bg-green-500":"bg-gray-500"}`}),(0,b.jsx)("span",{className:"text-white font-medium",children:a.name}),h&&(0,b.jsx)("span",{className:"text-xs bg-blue-600 px-2 py-1 rounded",children:"You"}),g&&(0,b.jsx)("span",{className:"text-xs bg-yellow-600 px-2 py-1 rounded",children:"Host"}),i&&(0,b.jsx)("span",{className:"text-xs bg-purple-600 px-2 py-1 rounded",children:"Clue Giver"})]}),e&&(0,b.jsx)("div",{className:"text-yellow-400 font-bold text-lg",children:a.score})]},a.id)})})]}),g=({messages:a,onSendMessage:d})=>{let[e,f]=(0,c.useState)(""),g=(0,c.useRef)(null);return(0,c.useEffect)(()=>{g.current?.scrollIntoView({behavior:"smooth"})},[a]),(0,b.jsxs)("div",{className:"bg-gray-800 rounded-lg shadow-lg flex flex-col h-full",children:[(0,b.jsx)("div",{className:"p-4 border-b border-gray-700",children:(0,b.jsx)("h3",{className:"text-lg font-bold text-white",children:"Chat"})}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-2 min-h-[200px] max-h-[400px]",children:[a.map((a,c)=>(0,b.jsxs)("div",{className:`${"system"===a.type?"text-gray-400 text-sm italic text-center":"bg-gray-700 p-2 rounded-lg"}`,children:["player"===a.type&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("span",{className:"font-bold text-blue-400",children:[a.playerName,": "]}),(0,b.jsx)("span",{className:"text-white",children:a.message})]}),"system"===a.type&&a.message]},c)),(0,b.jsx)("div",{ref:g})]}),(0,b.jsx)("form",{onSubmit:a=>{a.preventDefault(),e.trim()&&(d(e.trim()),f(""))},className:"p-4 border-t border-gray-700",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:"text",value:e,onChange:a=>f(a.target.value),placeholder:"Type a message...",className:"flex-1 bg-gray-700 text-white px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",maxLength:200}),(0,b.jsx)("button",{type:"submit",disabled:!e.trim(),className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white px-6 py-2 rounded-lg font-medium transition-colors",children:"Send"})]})})]})},h=[];for(let a=0;a<20;a++){let b=10+4.5*a;for(let c=0;c<24;c++){let d=15*c,e=0===a?0:70+a%3*10;h.push(function(a,b,c){let d=b*Math.min(c/=100,1-c)/100,e=b=>{let e=(b+a/30)%12;return Math.round(255*(c-d*Math.max(Math.min(e-3,9-e,1),-1))).toString(16).padStart(2,"0")};return`#${e(0)}${e(8)}${e(4)}`}(d,e,b))}}let i=({onColorClick:a,highlightedIndex:c,guessedIndices:d={},targetIndex:e,disabled:f=!1,showTarget:g=!1})=>(0,b.jsxs)("div",{className:"inline-block bg-gray-800 p-2 rounded-lg shadow-2xl",children:[(0,b.jsx)("div",{className:"grid gap-[1px]",style:{gridTemplateColumns:"repeat(24, minmax(0, 1fr))"},children:h.map((h,i)=>{let j=c===i,k=g&&e===i,l=Object.values(d).includes(i);return(0,b.jsx)("div",{onClick:()=>{!f&&a&&a(i)},className:`
                aspect-square w-full
                transition-all duration-200
                ${!f&&a?"cursor-pointer hover:scale-110 hover:z-10 hover:shadow-lg":""}
                ${j?"ring-4 ring-blue-500 scale-110 z-20":""}
                ${k?"ring-4 ring-yellow-400 scale-110 z-20":""}
                ${l?"ring-2 ring-white opacity-80":""}
              `,style:{backgroundColor:h},title:`${h} (${i})`},i)})}),(0,b.jsxs)("div",{className:"mt-2 text-xs text-gray-400 text-center",children:[24," Ã— ",20," = ",h.length," colors"]})]}),j=({cardColors:a,currentPhase:d,currentRound:e,roundsTotal:f,clue:g,clueGiver:h,isClueGiver:j,onSubmitClue:k,onPlaceGuess:l,guessDeadline:m,hasGuessed:n,myGuessIndex:o})=>{let[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(o??null),[t,u]=(0,c.useState)(null);c.default.useEffect(()=>{if(m){let a=setInterval(()=>{let b=Math.max(0,m-Date.now());u(b),0===b&&clearInterval(a)},100);return()=>clearInterval(a)}},[m]);let v=1===d?"one word":"two words",w=p.trim().split(/\s+/).length;return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-r from-purple-900 to-blue-900 p-6 rounded-lg shadow-lg",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold text-white",children:["Round ",e," of ",f]}),(0,b.jsxs)("div",{className:"text-xl font-bold text-yellow-400",children:["Phase ",d," (",1===d?"1 word":"2 words",")"]})]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("p",{className:"text-sm text-gray-300 mb-2",children:"Card Colors:"}),(0,b.jsx)("div",{className:"flex gap-2",children:a.map((a,c)=>(0,b.jsx)("div",{className:"w-16 h-16 rounded-lg shadow-lg border-2 border-white",style:{backgroundColor:a},title:a},c))})]}),j&&!g&&(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),p.trim().split(/\s+/).length===d&&(k(p.trim()),q(""))},className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"text-white font-medium mb-2 block",children:["Give a clue (",v,"):"]}),(0,b.jsx)("input",{type:"text",value:p,onChange:a=>q(a.target.value),placeholder:`Enter ${v}...`,className:"w-full bg-gray-700 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 text-lg",autoFocus:!0}),(0,b.jsx)("div",{className:"text-sm mt-1",children:(0,b.jsx)("span",{className:`${w===d?"text-green-400":"text-red-400"}`,children:0===w?"No words yet":`${w} word${w>1?"s":""}`})})]}),(0,b.jsx)("button",{type:"submit",disabled:w!==d,className:"w-full bg-yellow-600 hover:bg-yellow-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg font-bold text-lg transition-colors",children:"Submit Clue"})]}),g&&(0,b.jsxs)("div",{className:"bg-yellow-600 p-4 rounded-lg",children:[(0,b.jsxs)("p",{className:"text-sm text-yellow-100 mb-1",children:["Clue from ",h,":"]}),(0,b.jsxs)("p",{className:"text-3xl font-bold text-white text-center",children:['"',g,'"']})]}),null!==t&&t>0&&(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsx)("div",{className:"bg-gray-700 rounded-full h-2 overflow-hidden",children:(0,b.jsx)("div",{className:"bg-yellow-500 h-full transition-all duration-100",style:{width:`${t/6e4*100}%`}})}),(0,b.jsxs)("p",{className:"text-center text-sm text-gray-300 mt-1",children:[Math.ceil(t/1e3),"s remaining"]})]})]}),g&&!j&&(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:n?"Your guess:":"Select your guess:"}),!n&&(0,b.jsx)("p",{className:"text-gray-400",children:"Click a color on the grid below"})]}),(0,b.jsx)("div",{className:"flex justify-center mb-4",children:(0,b.jsx)(i,{onColorClick:a=>{j||n||s(a)},highlightedIndex:r,disabled:n})}),!n&&null!==r&&(0,b.jsx)("button",{onClick:()=>{null!==r&&l(r)},className:"bg-green-600 hover:bg-green-700 text-white px-8 py-3 rounded-lg font-bold text-lg transition-colors shadow-lg",children:"Confirm Guess"}),n&&(0,b.jsx)("p",{className:"text-green-400 font-bold text-lg",children:"âœ“ Guess submitted! Waiting for other players..."})]}),g&&j&&(0,b.jsx)("div",{className:"text-center text-gray-300 text-lg",children:"Waiting for players to guess..."})]})},k=({isOpen:a,targetIndex:c,targetColor:d,results:e,scoreboard:f,phase:g,round:i,onNext:j,isHost:k})=>{if(!a)return null;let l=[...e].sort((a,b)=>b.points-a.points);return(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,b.jsx)("div",{className:"bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("h2",{className:"text-3xl font-bold text-white mb-6 text-center",children:["Round ",i," - Phase ",g," Results"]}),(0,b.jsxs)("div",{className:"mb-6 text-center",children:[(0,b.jsx)("p",{className:"text-gray-300 mb-2",children:"Target Color:"}),(0,b.jsxs)("div",{className:"inline-block",children:[(0,b.jsx)("div",{className:"w-32 h-32 rounded-lg shadow-lg border-4 border-yellow-400 mx-auto",style:{backgroundColor:d}}),(0,b.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:d})]})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-white mb-3",children:"Guesses:"}),(0,b.jsx)("div",{className:"space-y-2",children:l.map((a,c)=>(0,b.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,b.jsxs)("div",{className:"text-2xl font-bold text-gray-400",children:["#",c+1]}),(0,b.jsx)("div",{className:"w-12 h-12 rounded border-2 border-white",style:{backgroundColor:h[a.guessIndex]}}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-white font-bold",children:a.playerName}),(0,b.jsxs)("p",{className:"text-sm text-gray-400",children:["Distance: ",a.distance,a.autoGuess&&" (auto)"]})]})]}),(0,b.jsxs)("div",{className:"text-2xl font-bold text-yellow-400",children:["+",a.points]})]},c))})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-white mb-3",children:"Scoreboard:"}),(0,b.jsx)("div",{className:"bg-gray-700 rounded-lg p-4",children:f.sort((a,b)=>b.score-a.score).map((a,c)=>(0,b.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-600 last:border-0",children:[(0,b.jsxs)("span",{className:"text-white font-medium",children:[c+1,". ",a.name]}),(0,b.jsx)("span",{className:"text-yellow-400 font-bold text-lg",children:a.score})]},c))})]}),k&&(0,b.jsx)("button",{onClick:j,className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-6 py-4 rounded-lg font-bold text-lg transition-colors",children:"Continue to Next Round"}),!k&&(0,b.jsx)("p",{className:"text-center text-gray-400",children:"Waiting for host to continue..."})]})})})},l=({isOpen:a,winner:c,finalScores:d,onPlayAgain:e,onBackToLobby:f})=>a?(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-gradient-to-br from-purple-900 to-blue-900 rounded-lg max-w-2xl w-full p-8",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)("h2",{className:"text-5xl font-bold text-yellow-400 mb-4",children:"ðŸŽ‰ Game Over! ðŸŽ‰"}),(0,b.jsxs)("p",{className:"text-3xl text-white font-bold",children:[c," wins!"]})]}),(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h3",{className:"text-2xl font-bold text-white mb-4 text-center",children:"Final Scores"}),(0,b.jsx)("div",{className:"bg-gray-800 rounded-lg p-6 space-y-3",children:d.map((a,c)=>(0,b.jsxs)("div",{className:`
                  flex justify-between items-center p-4 rounded-lg
                  ${0===c?"bg-yellow-600":"bg-gray-700"}
                `,children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:"text-3xl font-bold",children:0===c?"ðŸ¥‡":1===c?"ðŸ¥ˆ":2===c?"ðŸ¥‰":`${c+1}.`}),(0,b.jsx)("span",{className:"text-xl font-bold text-white",children:a.name})]}),(0,b.jsx)("span",{className:"text-2xl font-bold text-yellow-400",children:a.score})]},c))})]}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("button",{onClick:f,className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white px-6 py-4 rounded-lg font-bold text-lg transition-colors",children:"Back to Lobby"}),e&&(0,b.jsx)("button",{onClick:e,className:"flex-1 bg-green-600 hover:bg-green-700 text-white px-6 py-4 rounded-lg font-bold text-lg transition-colors",children:"Play Again"})]})]})}):null;function m({params:a}){let{code:h}=(0,c.use)(a),i=(0,d.useRouter)(),{socket:m,isConnected:n}=(0,e.useSocket)(),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)([]),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(null),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(null);(0,c.useEffect)(()=>{let a=localStorage.getItem("userId");a&&v(a)},[]),(0,c.useEffect)(()=>{if(m)return m.on("room_state",a=>{p(a)}),m.on("chat_message",a=>{t(b=>[...b,a])}),m.on("game_started",a=>{r(a.gameState),x(a.clueGiver),z(!1),B(void 0),D(!1)}),m.on("clue_given",a=>{r(b=>b?{...b,clue:a.clue,guessDeadline:a.deadline}:null),x(a.clueGiver)}),m.on("guess_placed",a=>{}),m.on("round_results",a=>{F(a),D(!0),z(!1),B(void 0)}),m.on("phase_changed",a=>{r(b=>b?{...b,currentPhase:a.phase,clue:void 0,guessDeadline:void 0}:null),x(a.clueGiver),z(!1),B(void 0),D(!1)}),m.on("new_round",a=>{r(b=>b?{...b,currentRound:a.round,currentPhase:1,cardColors:a.cardColors,clue:void 0,guessDeadline:void 0}:null),x(a.clueGiver),z(!1),B(void 0),D(!1)}),m.on("game_over",a=>{J(a),H(!0),r(null)}),()=>{m.off("room_state"),m.off("chat_message"),m.off("game_started"),m.off("clue_given"),m.off("guess_placed"),m.off("round_results"),m.off("phase_changed"),m.off("new_round"),m.off("game_over")}},[m]);let K=o?.players.find(a=>a.id===m?.id),L=o?.hostId===m?.id,M=K?.name===w;return n&&o?(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 p-4",children:[(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 mb-4 flex justify-between items-center shadow-lg",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold text-white",children:["Room: ",(0,b.jsx)("span",{className:"text-yellow-400 font-mono",children:o.code})]}),(0,b.jsxs)("p",{className:"text-gray-400",children:[o.settings.rounds," rounds â€¢ Max ",o.settings.maxPlayers," players"]})]}),(0,b.jsx)("button",{onClick:()=>{m&&o&&(m.emit("leave_room",{code:o.code}),i.push("/"))},className:"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg font-medium transition-colors",children:"Leave Room"})]}),(0,b.jsxs)("div",{className:"grid lg:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(f,{players:o.players,hostId:o.hostId,currentUserId:m?.id,isGameActive:o.hasActiveGame,clueGiverId:o.players.find(a=>a.name===w)?.id}),!o.hasActiveGame&&(0,b.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 shadow-lg space-y-3",children:[(0,b.jsx)("button",{onClick:()=>{m&&o&&m.emit("player_ready",{code:o.code,ready:!K?.ready},a=>{a.success||alert(a.error)})},className:`w-full px-6 py-3 rounded-lg font-bold transition-colors ${K?.ready?"bg-gray-600 hover:bg-gray-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:K?.ready?"Unready":"Ready"}),L&&(0,b.jsx)("button",{onClick:()=>{m&&o&&m.emit("start_game",{code:o.code},a=>{a.success||alert(a.error)})},className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg font-bold transition-colors",children:"Start Game"}),!L&&(0,b.jsx)("p",{className:"text-center text-gray-400 text-sm",children:"Waiting for host to start..."})]}),(0,b.jsx)(g,{messages:s,onSendMessage:a=>{m&&o&&m.emit("chat_message",{code:o.code,message:a},a=>{a.success||console.error("Failed to send message:",a.error)})}})]}),(0,b.jsxs)("div",{className:"lg:col-span-2",children:[!o.hasActiveGame&&!q&&(0,b.jsxs)("div",{className:"bg-gray-800 rounded-lg p-12 shadow-lg text-center",children:[(0,b.jsx)("h2",{className:"text-3xl font-bold text-white mb-4",children:"Waiting for game to start..."}),(0,b.jsxs)("p",{className:"text-gray-400 text-lg mb-6",children:[o.players.filter(a=>a.ready||a.id===o.hostId).length," /"," ",o.players.length," players ready"]}),(0,b.jsxs)("div",{className:"text-left max-w-md mx-auto space-y-2 text-gray-300",children:[(0,b.jsx)("p",{children:"ðŸ“ Each round has 2 phases:"}),(0,b.jsx)("p",{className:"ml-4",children:"â€¢ Phase 1: One-word clue"}),(0,b.jsx)("p",{className:"ml-4",children:"â€¢ Phase 2: Two-word clue"}),(0,b.jsx)("p",{className:"mt-4",children:"ðŸŽ¯ Goal: Guess the color closest to the target!"})]})]}),q&&(0,b.jsx)(j,{cardColors:q.cardColors,currentPhase:q.currentPhase,currentRound:q.currentRound,roundsTotal:q.roundsTotal,clue:q.clue,clueGiver:w,isClueGiver:M,onSubmitClue:a=>{m&&o&&m.emit("send_clue",{code:o.code,clue:a},a=>{a.success||alert(a.error)})},onPlaceGuess:a=>{m&&o&&m.emit("place_guess",{code:o.code,guessIndex:a},b=>{b.success?(z(!0),B(a)):alert(b.error)})},guessDeadline:q.guessDeadline,hasGuessed:y,myGuessIndex:A})]})]})]}),E&&(0,b.jsx)(k,{isOpen:C,targetIndex:E.targetIndex,targetColor:E.targetColor,results:E.results,scoreboard:E.scoreboard,phase:E.phase,round:E.round,onNext:()=>{m&&o&&m.emit("next_round",{code:o.code},a=>{a.success?D(!1):alert(a.error)})},isHost:L}),I&&(0,b.jsx)(l,{isOpen:G,winner:I.winner,finalScores:I.finalScores,onBackToLobby:()=>{H(!1),r(null)}})]}):(0,b.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-500 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-white text-xl",children:"Loading room..."})]})})}a.s(["default",()=>m],52562)}];

//# sourceMappingURL=app_room_%5Bcode%5D_page_tsx_1fd69ef6._.js.map