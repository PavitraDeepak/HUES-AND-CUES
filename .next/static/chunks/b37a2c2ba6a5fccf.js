(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,80520,e=>{"use strict";var s=e.i(43476),t=e.i(71645),l=e.i(18566),a=e.i(28149);let r=({players:e,hostId:t,currentUserId:l,isGameActive:a=!1,clueGiverId:r})=>(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 shadow-lg",children:[(0,s.jsxs)("h3",{className:"text-lg font-bold text-white mb-3",children:["Players (",e.length,")"]}),(0,s.jsx)("div",{className:"space-y-2",children:e.map(e=>{let n=e.id===t,d=e.id===l,o=e.id===r;return(0,s.jsxs)("div",{className:`
                flex items-center justify-between p-3 rounded-lg
                ${d?"bg-blue-900 border-2 border-blue-500":"bg-gray-700"}
                ${o?"ring-2 ring-yellow-400":""}
              `,children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,s.jsx)("div",{className:`w-3 h-3 rounded-full ${e.ready?"bg-green-500":"bg-gray-500"}`}),(0,s.jsx)("span",{className:"text-white font-medium",children:e.name}),d&&(0,s.jsx)("span",{className:"text-xs bg-blue-600 px-2 py-1 rounded",children:"You"}),n&&(0,s.jsx)("span",{className:"text-xs bg-yellow-600 px-2 py-1 rounded",children:"Host"}),o&&(0,s.jsx)("span",{className:"text-xs bg-purple-600 px-2 py-1 rounded",children:"Clue Giver"})]}),a&&(0,s.jsx)("div",{className:"text-yellow-400 font-bold text-lg",children:e.score})]},e.id)})})]}),n=({messages:e,onSendMessage:l})=>{let[a,r]=(0,t.useState)(""),n=(0,t.useRef)(null);return(0,t.useEffect)(()=>{n.current?.scrollIntoView({behavior:"smooth"})},[e]),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg shadow-lg flex flex-col h-full",children:[(0,s.jsx)("div",{className:"p-4 border-b border-gray-700",children:(0,s.jsx)("h3",{className:"text-lg font-bold text-white",children:"Chat"})}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-2 min-h-[200px] max-h-[400px]",children:[e.map((e,t)=>(0,s.jsxs)("div",{className:`${"system"===e.type?"text-gray-400 text-sm italic text-center":"bg-gray-700 p-2 rounded-lg"}`,children:["player"===e.type&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{className:"font-bold text-blue-400",children:[e.playerName,": "]}),(0,s.jsx)("span",{className:"text-white",children:e.message})]}),"system"===e.type&&e.message]},t)),(0,s.jsx)("div",{ref:n})]}),(0,s.jsx)("form",{onSubmit:e=>{e.preventDefault(),a.trim()&&(l(a.trim()),r(""))},className:"p-4 border-t border-gray-700",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:a,onChange:e=>r(e.target.value),placeholder:"Type a message...",className:"flex-1 bg-gray-700 text-white px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",maxLength:200}),(0,s.jsx)("button",{type:"submit",disabled:!a.trim(),className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white px-6 py-2 rounded-lg font-medium transition-colors",children:"Send"})]})})]})},d=[];for(let e=0;e<20;e++){let s=10+4.5*e;for(let t=0;t<24;t++){let l=15*t,a=0===e?0:70+e%3*10;d.push(function(e,s,t){let l=s*Math.min(t/=100,1-t)/100,a=s=>{let a=(s+e/30)%12;return Math.round(255*(t-l*Math.max(Math.min(a-3,9-a,1),-1))).toString(16).padStart(2,"0")};return`#${a(0)}${a(8)}${a(4)}`}(l,a,s))}}let o=({onColorClick:e,highlightedIndex:t,guessedIndices:l={},targetIndex:a,disabled:r=!1,showTarget:n=!1})=>(0,s.jsxs)("div",{className:"inline-block bg-gray-800 p-2 rounded-lg shadow-2xl",children:[(0,s.jsx)("div",{className:"grid gap-[1px]",style:{gridTemplateColumns:"repeat(24, minmax(0, 1fr))"},children:d.map((d,o)=>{let i=t===o,c=n&&a===o,x=Object.values(l).includes(o);return(0,s.jsx)("div",{onClick:()=>{!r&&e&&e(o)},className:`
                aspect-square w-full
                transition-all duration-200
                ${!r&&e?"cursor-pointer hover:scale-110 hover:z-10 hover:shadow-lg":""}
                ${i?"ring-4 ring-blue-500 scale-110 z-20":""}
                ${c?"ring-4 ring-yellow-400 scale-110 z-20":""}
                ${x?"ring-2 ring-white opacity-80":""}
              `,style:{backgroundColor:d},title:`${d} (${o})`},o)})}),(0,s.jsxs)("div",{className:"mt-2 text-xs text-gray-400 text-center",children:[24," Ã— ",20," = ",d.length," colors"]})]}),i=({cardColors:e,currentPhase:l,currentRound:a,roundsTotal:r,clue:n,clueGiver:d,isClueGiver:i,onSubmitClue:c,onPlaceGuess:x,guessDeadline:u,hasGuessed:m,myGuessIndex:h})=>{let[g,b]=(0,t.useState)(""),[p,f]=(0,t.useState)(h??null),[y,j]=(0,t.useState)(null);t.default.useEffect(()=>{if(u){let e=setInterval(()=>{let s=Math.max(0,u-Date.now());j(s),0===s&&clearInterval(e)},100);return()=>clearInterval(e)}},[u]);let v=1===l?"one word":"two words",N=g.trim().split(/\s+/).length;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-purple-900 to-blue-900 p-6 rounded-lg shadow-lg",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-white",children:["Round ",a," of ",r]}),(0,s.jsxs)("div",{className:"text-xl font-bold text-yellow-400",children:["Phase ",l," (",1===l?"1 word":"2 words",")"]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-300 mb-2",children:"Card Colors:"}),(0,s.jsx)("div",{className:"flex gap-2",children:e.map((e,t)=>(0,s.jsx)("div",{className:"w-16 h-16 rounded-lg shadow-lg border-2 border-white",style:{backgroundColor:e},title:e},t))})]}),i&&!n&&(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),g.trim().split(/\s+/).length===l&&(c(g.trim()),b(""))},className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"text-white font-medium mb-2 block",children:["Give a clue (",v,"):"]}),(0,s.jsx)("input",{type:"text",value:g,onChange:e=>b(e.target.value),placeholder:`Enter ${v}...`,className:"w-full bg-gray-700 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 text-lg",autoFocus:!0}),(0,s.jsx)("div",{className:"text-sm mt-1",children:(0,s.jsx)("span",{className:`${N===l?"text-green-400":"text-red-400"}`,children:0===N?"No words yet":`${N} word${N>1?"s":""}`})})]}),(0,s.jsx)("button",{type:"submit",disabled:N!==l,className:"w-full bg-yellow-600 hover:bg-yellow-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg font-bold text-lg transition-colors",children:"Submit Clue"})]}),n&&(0,s.jsxs)("div",{className:"bg-yellow-600 p-4 rounded-lg",children:[(0,s.jsxs)("p",{className:"text-sm text-yellow-100 mb-1",children:["Clue from ",d,":"]}),(0,s.jsxs)("p",{className:"text-3xl font-bold text-white text-center",children:['"',n,'"']})]}),null!==y&&y>0&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("div",{className:"bg-gray-700 rounded-full h-2 overflow-hidden",children:(0,s.jsx)("div",{className:"bg-yellow-500 h-full transition-all duration-100",style:{width:`${y/6e4*100}%`}})}),(0,s.jsxs)("p",{className:"text-center text-sm text-gray-300 mt-1",children:[Math.ceil(y/1e3),"s remaining"]})]})]}),n&&!i&&(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:m?"Your guess:":"Select your guess:"}),!m&&(0,s.jsx)("p",{className:"text-gray-400",children:"Click a color on the grid below"})]}),(0,s.jsx)("div",{className:"flex justify-center mb-4",children:(0,s.jsx)(o,{onColorClick:e=>{i||m||f(e)},highlightedIndex:p,disabled:m})}),!m&&null!==p&&(0,s.jsx)("button",{onClick:()=>{null!==p&&x(p)},className:"bg-green-600 hover:bg-green-700 text-white px-8 py-3 rounded-lg font-bold text-lg transition-colors shadow-lg",children:"Confirm Guess"}),m&&(0,s.jsx)("p",{className:"text-green-400 font-bold text-lg",children:"âœ“ Guess submitted! Waiting for other players..."})]}),n&&i&&(0,s.jsx)("div",{className:"text-center text-gray-300 text-lg",children:"Waiting for players to guess..."})]})},c=({isOpen:e,targetIndex:t,targetColor:l,results:a,scoreboard:r,phase:n,round:o,onNext:i,isHost:c})=>{if(!e)return null;let x=[...a].sort((e,s)=>s.points-e.points);return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,s.jsx)("div",{className:"bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("h2",{className:"text-3xl font-bold text-white mb-6 text-center",children:["Round ",o," - Phase ",n," Results"]}),(0,s.jsxs)("div",{className:"mb-6 text-center",children:[(0,s.jsx)("p",{className:"text-gray-300 mb-2",children:"Target Color:"}),(0,s.jsxs)("div",{className:"inline-block",children:[(0,s.jsx)("div",{className:"w-32 h-32 rounded-lg shadow-lg border-4 border-yellow-400 mx-auto",style:{backgroundColor:l}}),(0,s.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:l})]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-white mb-3",children:"Guesses:"}),(0,s.jsx)("div",{className:"space-y-2",children:x.map((e,t)=>(0,s.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,s.jsxs)("div",{className:"text-2xl font-bold text-gray-400",children:["#",t+1]}),(0,s.jsx)("div",{className:"w-12 h-12 rounded border-2 border-white",style:{backgroundColor:d[e.guessIndex]}}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-white font-bold",children:e.playerName}),(0,s.jsxs)("p",{className:"text-sm text-gray-400",children:["Distance: ",e.distance,e.autoGuess&&" (auto)"]})]})]}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-yellow-400",children:["+",e.points]})]},t))})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-white mb-3",children:"Scoreboard:"}),(0,s.jsx)("div",{className:"bg-gray-700 rounded-lg p-4",children:r.sort((e,s)=>s.score-e.score).map((e,t)=>(0,s.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-600 last:border-0",children:[(0,s.jsxs)("span",{className:"text-white font-medium",children:[t+1,". ",e.name]}),(0,s.jsx)("span",{className:"text-yellow-400 font-bold text-lg",children:e.score})]},t))})]}),c&&(0,s.jsx)("button",{onClick:i,className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-6 py-4 rounded-lg font-bold text-lg transition-colors",children:"Continue to Next Round"}),!c&&(0,s.jsx)("p",{className:"text-center text-gray-400",children:"Waiting for host to continue..."})]})})})},x=({isOpen:e,winner:t,finalScores:l,onPlayAgain:a,onBackToLobby:r})=>e?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-gradient-to-br from-purple-900 to-blue-900 rounded-lg max-w-2xl w-full p-8",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h2",{className:"text-5xl font-bold text-yellow-400 mb-4",children:"ðŸŽ‰ Game Over! ðŸŽ‰"}),(0,s.jsxs)("p",{className:"text-3xl text-white font-bold",children:[t," wins!"]})]}),(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h3",{className:"text-2xl font-bold text-white mb-4 text-center",children:"Final Scores"}),(0,s.jsx)("div",{className:"bg-gray-800 rounded-lg p-6 space-y-3",children:l.map((e,t)=>(0,s.jsxs)("div",{className:`
                  flex justify-between items-center p-4 rounded-lg
                  ${0===t?"bg-yellow-600":"bg-gray-700"}
                `,children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-3xl font-bold",children:0===t?"ðŸ¥‡":1===t?"ðŸ¥ˆ":2===t?"ðŸ¥‰":`${t+1}.`}),(0,s.jsx)("span",{className:"text-xl font-bold text-white",children:e.name})]}),(0,s.jsx)("span",{className:"text-2xl font-bold text-yellow-400",children:e.score})]},t))})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("button",{onClick:r,className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white px-6 py-4 rounded-lg font-bold text-lg transition-colors",children:"Back to Lobby"}),a&&(0,s.jsx)("button",{onClick:a,className:"flex-1 bg-green-600 hover:bg-green-700 text-white px-6 py-4 rounded-lg font-bold text-lg transition-colors",children:"Play Again"})]})]})}):null;function u({params:e}){let{code:d}=(0,t.use)(e),o=(0,l.useRouter)(),{socket:u,isConnected:m}=(0,a.useSocket)(),[h,g]=(0,t.useState)(null),[b,p]=(0,t.useState)(null),[f,y]=(0,t.useState)([]),[j,v]=(0,t.useState)(""),[N,w]=(0,t.useState)(""),[C,S]=(0,t.useState)(!1),[_,G]=(0,t.useState)(),[k,$]=(0,t.useState)(!1),[I,P]=(0,t.useState)(null),[R,T]=(0,t.useState)(!1),[D,M]=(0,t.useState)(null);(0,t.useEffect)(()=>{let e=localStorage.getItem("userId");e&&v(e)},[]),(0,t.useEffect)(()=>{if(u)return u.on("room_state",e=>{g(e)}),u.on("chat_message",e=>{y(s=>[...s,e])}),u.on("game_started",e=>{p(e.gameState),w(e.clueGiver),S(!1),G(void 0),$(!1)}),u.on("clue_given",e=>{p(s=>s?{...s,clue:e.clue,guessDeadline:e.deadline}:null),w(e.clueGiver)}),u.on("guess_placed",e=>{}),u.on("round_results",e=>{P(e),$(!0),S(!1),G(void 0)}),u.on("phase_changed",e=>{p(s=>s?{...s,currentPhase:e.phase,clue:void 0,guessDeadline:void 0}:null),w(e.clueGiver),S(!1),G(void 0),$(!1)}),u.on("new_round",e=>{p(s=>s?{...s,currentRound:e.round,currentPhase:1,cardColors:e.cardColors,clue:void 0,guessDeadline:void 0}:null),w(e.clueGiver),S(!1),G(void 0),$(!1)}),u.on("game_over",e=>{M(e),T(!0),p(null)}),()=>{u.off("room_state"),u.off("chat_message"),u.off("game_started"),u.off("clue_given"),u.off("guess_placed"),u.off("round_results"),u.off("phase_changed"),u.off("new_round"),u.off("game_over")}},[u]);let A=h?.players.find(e=>e.id===u?.id),O=h?.hostId===u?.id,E=A?.name===N;return m&&h?(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 p-4",children:[(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 mb-4 flex justify-between items-center shadow-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold text-white",children:["Room: ",(0,s.jsx)("span",{className:"text-yellow-400 font-mono",children:h.code})]}),(0,s.jsxs)("p",{className:"text-gray-400",children:[h.settings.rounds," rounds â€¢ Max ",h.settings.maxPlayers," players"]})]}),(0,s.jsx)("button",{onClick:()=>{u&&h&&(u.emit("leave_room",{code:h.code}),o.push("/"))},className:"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg font-medium transition-colors",children:"Leave Room"})]}),(0,s.jsxs)("div",{className:"grid lg:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(r,{players:h.players,hostId:h.hostId,currentUserId:u?.id,isGameActive:h.hasActiveGame,clueGiverId:h.players.find(e=>e.name===N)?.id}),!h.hasActiveGame&&(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 shadow-lg space-y-3",children:[(0,s.jsx)("button",{onClick:()=>{u&&h&&u.emit("player_ready",{code:h.code,ready:!A?.ready},e=>{e.success||alert(e.error)})},className:`w-full px-6 py-3 rounded-lg font-bold transition-colors ${A?.ready?"bg-gray-600 hover:bg-gray-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:A?.ready?"Unready":"Ready"}),O&&(0,s.jsx)("button",{onClick:()=>{u&&h&&u.emit("start_game",{code:h.code},e=>{e.success||alert(e.error)})},className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg font-bold transition-colors",children:"Start Game"}),!O&&(0,s.jsx)("p",{className:"text-center text-gray-400 text-sm",children:"Waiting for host to start..."})]}),(0,s.jsx)(n,{messages:f,onSendMessage:e=>{u&&h&&u.emit("chat_message",{code:h.code,message:e},e=>{e.success||console.error("Failed to send message:",e.error)})}})]}),(0,s.jsxs)("div",{className:"lg:col-span-2",children:[!h.hasActiveGame&&!b&&(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-12 shadow-lg text-center",children:[(0,s.jsx)("h2",{className:"text-3xl font-bold text-white mb-4",children:"Waiting for game to start..."}),(0,s.jsxs)("p",{className:"text-gray-400 text-lg mb-6",children:[h.players.filter(e=>e.ready||e.id===h.hostId).length," /"," ",h.players.length," players ready"]}),(0,s.jsxs)("div",{className:"text-left max-w-md mx-auto space-y-2 text-gray-300",children:[(0,s.jsx)("p",{children:"ðŸ“ Each round has 2 phases:"}),(0,s.jsx)("p",{className:"ml-4",children:"â€¢ Phase 1: One-word clue"}),(0,s.jsx)("p",{className:"ml-4",children:"â€¢ Phase 2: Two-word clue"}),(0,s.jsx)("p",{className:"mt-4",children:"ðŸŽ¯ Goal: Guess the color closest to the target!"})]})]}),b&&(0,s.jsx)(i,{cardColors:b.cardColors,currentPhase:b.currentPhase,currentRound:b.currentRound,roundsTotal:b.roundsTotal,clue:b.clue,clueGiver:N,isClueGiver:E,onSubmitClue:e=>{u&&h&&u.emit("send_clue",{code:h.code,clue:e},e=>{e.success||alert(e.error)})},onPlaceGuess:e=>{u&&h&&u.emit("place_guess",{code:h.code,guessIndex:e},s=>{s.success?(S(!0),G(e)):alert(s.error)})},guessDeadline:b.guessDeadline,hasGuessed:C,myGuessIndex:_})]})]})]}),I&&(0,s.jsx)(c,{isOpen:k,targetIndex:I.targetIndex,targetColor:I.targetColor,results:I.results,scoreboard:I.scoreboard,phase:I.phase,round:I.round,onNext:()=>{u&&h&&u.emit("next_round",{code:h.code},e=>{e.success?$(!1):alert(e.error)})},isHost:O}),D&&(0,s.jsx)(x,{isOpen:R,winner:D.winner,finalScores:D.finalScores,onBackToLobby:()=>{T(!1),p(null)}})]}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-500 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-white text-xl",children:"Loading room..."})]})})}e.s(["default",()=>u],80520)}]);